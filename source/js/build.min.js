const getResource=async e=>{const t=await fetch("http://localhost:3000/"+e);if(!t.ok)throw new Error(`Could not fetch http://localhost:3000/presents/${e}, status ${t.status}`);return await t.json()},sendRequest=(e,t={})=>fetch(e,t).then(e=>e.json()),createElement=function({attrs:e={},styles:t={},handlers:n={},data:r=[],type:a="div",forAttr:c,text:s,html:o,className:i,id:l,parent:d}){const m=document.createElement(a);for(const t in e)m[t]=e[t];for(const e in t)m.style[e]=t[e];for(const e in n)m.addEventListener(e,n[e].bind(m));return r.forEach(e=>{m.setAttribute(e.key,e.value)}),c&&m.setAttribute("for",c),l&&(m.id=l),i&&(m.className=i),s&&(m.innerText=s),o&&(m.innerHTML=o),d&&d.appendChild(m),m};function showSearch(){const e=document.querySelector(".shop-search-container");e.innerHTML=" ";const t=createElement({type:"div",className:"shop__search-container",id:"search-container",parent:e}),n={text:"search",type:"button",className:"btn btn--orange shop__search-btn",id:"btn-search",parent:t};createElement({attrs:{placeholder:"Search something you need..."},type:"input",className:"shop__search-item",id:"input-search",parent:t}),createElement(n)}const filtersRadioData=[{value:"От дорогих к дешевым"},{value:"От дешевых к дорогим"}];function getBrandName(e){const t=new Map;return e.forEach(e=>t.set(e.brand,e.brand)),t}function showFilter(){const e=document.querySelector(".shop__flex-container");document.querySelectorAll(".header .nav__link").forEach(t=>t.addEventListener("click",()=>{const t=event.target.getAttribute("data-category");getResource(t).then(t=>createFilter(t,e))}))}function createFilter(e,t){const n=document.querySelector(".filters");n&&n.remove();const r=createElement({type:"aside",className:"filters",id:"filters",parent:t}),a=createElement({type:"div",className:"filters__header",parent:r});createElement({type:"h2",className:"shop__title",text:"Фильтр по брендам",parent:a});const c=createElement({type:"div",className:"filters__content",parent:r}),s=createElement({type:"div",className:"filters__block",parent:c}),o={type:"h2",text:"Choose something",className:"filters__title",parent:s};createElement(o);getBrandName(e).forEach((function(e){const t=createElement({type:"div",className:"choose-service__item filters__item",parent:s});createElement({type:"input",attrs:{name:e,type:"checkbox"},id:e,className:"choose-service__input",parent:t});createElement({type:"label",forAttr:e,className:"choose-service__checkbox",parent:t});createElement({type:"label",forAttr:e,className:"choose-master__text",text:e,parent:t})})),createElement(o),filtersRadioData.forEach((function(e){const t=createElement({type:"div",className:"choose-service__item filters__item",parent:s}),n={type:"input",attrs:{name:"choose-master__item",type:"radio"},id:"filter-"+filtersRadioData.indexOf(e),className:"choose-master__radio",parent:t};createElement(n);const r={type:"label",forAttr:"filter-"+filtersRadioData.indexOf(e),className:"choose-master__label",parent:t};createElement(r);const a={type:"label",forAttr:"filter-"+filtersRadioData.indexOf(e),className:"choose-master__text",text:e.value,parent:t};createElement(a)}));const i=createElement({type:"div",className:"filters__btn-submit",parent:r});createElement({type:"button",className:"btn btn--black",id:"btnShowFilter",text:"Фильтр",parent:i}).addEventListener("click",handleCheckFilter)}function handleCheckFilter(){const e=document.querySelectorAll(".choose-service__input"),t=document.querySelector(".shop__flex-container"),n=document.querySelector(".shop__cards").getAttribute("id"),r=[];e.forEach(e=>{e.checked&&r.push(e.name)}),getResource(n).then(e=>{const a=[];e.forEach(e=>{r.forEach(t=>{e.brand===t&&a.push(e)})});document.querySelectorAll(".choose-master__radio").forEach(r=>{r.checked&&"filter-0"===r.id?0===a.length?(e.sort((e,t)=>Number(e.price)>Number(t.price)?1:-1),e.reverse(),console.log(e),createCards(e,t,n)):(a.sort((e,t)=>Number(e.price)>Number(t.price)?1:-1),a.reverse(),createCards(a,t,n)):r.checked&&"filter-1"===r.id?0===a.length?(e.sort((e,t)=>Number(e.price)>Number(t.price)?1:-1),createCards(e,t,n)):(a.sort((e,t)=>Number(e.price)>Number(t.price)?1:-1),createCards(a,t,n)):0===a.length?createCards(e,t,n):createCards(a,t,n)})})}const basketArr=[{id:11,name:"Опасная Бритва The Bluebeards Revenge «Claymore» Straight Razor 5/8",price:"5778",descriptions:"Классическая бритва со сверх-острым лезвием из высококачественной стали и ручкой из африканского черного дерева. Обеспечивает безупречно гладкое и профессиональное бритье.Качественная классическая бритва The Bluebeards Revenge «CLAYMORE» Straight Razor 5/8 African Blackwood из углеродистой стали — это прекрасный инструмент для бритья. Идеально подходит для мужчин, которые любят классический стиль бритья.Изготовлена ​​вручную с нанесением на лезвие аутентичной надписи, которая добавляет бритве стильный вид и уникальность. Современный дизайн бритвы не просто радует глаз, но и продуман до мельчайших деталей. Вес отлично сбалансирован, и таким образом бритва не производит излишнего давления на кожу, которое может спровоцировать раздражение и воспаление. Кожа владельца больше защищена от раздражения и мелких порезов. Подходит как для новичков, так и для опытных пользователей опасных бритв. Идеальный выбор настоящих мужчин.",brand:"Claymore",img:"https://barbercompany.com/image/cache/webp/catalog/product/2016-06-the-bluedeards-revange-claymore-straight-razor-543x543.webp"},{id:11,name:"Опасная Бритва The Bluebeards Revenge «Claymore» Straight Razor 5/8",price:"5778",descriptions:"Классическая бритва со сверх-острым лезвием из высококачественной стали и ручкой из африканского черного дерева. Обеспечивает безупречно гладкое и профессиональное бритье.Качественная классическая бритва The Bluebeards Revenge «CLAYMORE» Straight Razor 5/8 African Blackwood из углеродистой стали — это прекрасный инструмент для бритья. Идеально подходит для мужчин, которые любят классический стиль бритья.Изготовлена ​​вручную с нанесением на лезвие аутентичной надписи, которая добавляет бритве стильный вид и уникальность. Современный дизайн бритвы не просто радует глаз, но и продуман до мельчайших деталей. Вес отлично сбалансирован, и таким образом бритва не производит излишнего давления на кожу, которое может спровоцировать раздражение и воспаление. Кожа владельца больше защищена от раздражения и мелких порезов. Подходит как для новичков, так и для опытных пользователей опасных бритв. Идеальный выбор настоящих мужчин.",brand:"Claymore",img:"https://barbercompany.com/image/cache/webp/catalog/product/2016-06-the-bluedeards-revange-claymore-straight-razor-543x543.webp"}],showBasket=()=>{const e=document.getElementById("basketBtn"),t=document.getElementById("basketCounter"),n=JSON.parse(localStorage.getItem("basket"));t.innerText=n.length,e.addEventListener("click",handleShowBasket)},handleShowBasket=()=>{const e=document.querySelector(".shop__flex-container");e.innerHTML=" ";const t=document.createElement("div");t.classList.add("productBasket"),e.appendChild(t);JSON.parse(localStorage.getItem("basket")).forEach(e=>{createBasketCard(e,t)});const n=createElement({type:"div",className:"checkout",parent:e}),r={type:"div",className:"checkout__price",parent:n,text:`Цена: ${getCountPrice()} грн`};createElement(r),createElement({type:"button",className:"btn btn--orange",parent:n,text:"Оформить заказ"})},createBasketCard=(e,t)=>{const n=document.createElement("div");n.classList.add("productBasket__item"),n.innerHTML=`\n        <div class="productBasket__img-container" data-id=${e.id}>\n                <img src="${e.img}" alt="" class="productBasket__img">\n        </div>\n        <div class="productBasket__content" data-id=${e.id}>\n        <h3 class="productBasket__title">\n            ${e.name}\n        </h3>\n        <p class="productBasket__price">\n            ${e.price} грн\n        </p>\n        <div class="productBasket__buttons">\n            <button class="productBasket__btnDelete btn btn--black" id="basketDeleteItemBtn">Убрать из корзины</button>\n        </div>\n    `,t.appendChild(n)},getCountPrice=()=>{const e=JSON.parse(localStorage.getItem("basket"));let t=0;return e.forEach(e=>{t+=Number(e.price)}),t},start=()=>{localStorage.getItem("basket")||localStorage.setItem("basket",JSON.stringify(basketArr));const e=document.querySelector(".shop__flex-container"),t=document.querySelector(".header .nav__link").getAttribute("data-category");handlerNavLink(),showSearch(),showBasket(),window.addEventListener("DOMContentLoaded",()=>{getResource(t).then(t=>createFilter(t,e)),getResource(t).then(n=>createCards(n,e,t))})},handlerNavLink=()=>{document.querySelectorAll(".header .nav .nav__link").forEach(e=>e.addEventListener("click",showProducts))},showProducts=e=>{const t=document.querySelector(".shop__flex-container");t.innerHTML=" ";const n=e.target.getAttribute("data-category");getResource(n).then(e=>{createFilter(e,t),createCards(e,t,n)})},createCards=(e,t,n)=>{const r=document.querySelector(".shop__cards");r&&r.remove();const a=createElement({className:"shop__cards",id:n,parent:t});e.forEach(t=>{createCard(t,a,e)})},createCard=(e,t,n)=>{const r=createElement({className:"product",parent:t,html:`<div class="product__img-container">\n            <img src="${e.img}" alt="" class="product__img">\n    </div>\n    <div class="product__content">\n            <h3 class="product__title">\n                ${e.name}\n            </h3>\n            <p class="product__price">\n                ${e.price} грн\n            </p>\n            <div class="product__buttons">\n                <button class="btn btn--black" data-id=${e.id}>Посмотреть</button>\n                <button class="btn btn--plus"></button>\n            </div>`});document.querySelectorAll(".product__img").forEach(e=>{e.style.width="100%"}),r.addEventListener("click",handlerProductItem.bind(null,n))},handlerProductItem=(e,t)=>{const n=t.target;if("btn btn--black"!==n.className)return;const r=n.getAttribute("data-id"),a=e.find(e=>e.id===Number(r));showDetailInfo(a)},showDetailInfo=e=>{document.querySelector(".shop .wrapper .shop-content .shop__flex-container").innerHTML="";const t=document.querySelector(".shop__flex-container");createElement({className:"product-info",parent:t,html:`<div class="product-info__img">\n      <img src=${e.img} alt="product img"/>\n  </div>\n  <div class="product-info__info">\n      <div class="product-info__link-container">\n          <a class="product-info__link product-info__link--active" id="descriptions">Описание</a>\n          <a class="product-info__link" id="reviews">Отзывы</a>\n      </div>\n      <div class="product-info__descriptions">\n          <div class="product-info__title-container">\n               <h2 class="product-info__title">${e.name}</h2>\n              <p class="product-info__description">${e.descriptions}</p>\n           </div>\n          <div class="product-info__price-container">\n               <p class="product-info__price">${e.price} грн</p>\n              <button class="btn btn--plus"></button>\n          </div>\n      </div>\n  </div>`}),document.getElementById("reviews").addEventListener("click",handlerReview.bind(null,e)),document.getElementById("descriptions").addEventListener("click",handlerDescriptions.bind(null,e))},handlerReview=e=>{const t=document.querySelector(".product-info__descriptions");t.innerHTML="",activeLink("reviews","descriptions"),t.innerHTML='<div class="popup__comment-container">\n  <div class="form-group">\n  <input type="email" class="form-control" id="emailForm" placeholder="Enter your email...">\n  </div>\n        <textarea class="popup__comment" name="review" id="review" placeholder="Please leave your review..." cols="72" rows="5"></textarea>\n    </div>\n    </div>\n    <div class="appointment-form__btn">\n    <button type="submit" class="btn btn--orange" id="btnSend">Отправить</button>\n    </div> \n    <div class="comments"></div>\n';const n=document.querySelector(".comments");showComments(n,e),document.querySelector("#btnSend").addEventListener("click",handlerPostSend.bind(null,n,e))},handlerDescriptions=e=>{document.querySelector(".product-info__descriptions").innerHTML="",activeLink("descriptions","reviews"),showDetailInfo(e)},handlerPostSend=(e,t,n)=>{n.preventDefault();const r=document.getElementById("emailForm").value,a=document.querySelector("#review").value,c={};c.texts=a,c.email=r,c.productId=t.id,createElement({html:`<div class="container">\n    <p>${r}</p>\n    <p class="lead">${a}</p>\n  </div>`,parent:e,className:"jumbotron jumbotron-fluid"}),sendRequest("http://localhost:3000/commit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})},showComments=(e,t)=>{getResource("commit").then(n=>n.forEach(n=>{n.productId===t.id&&createElement({html:`<div class="container">\n        <p>${n.email}</p>\n        <p class="lead">${n.texts}</p>\n      </div>`,parent:e,className:"jumbotron jumbotron-fluid"})}))},activeLink=(e,t)=>{document.getElementById(e).classList.add("product-info__link--active"),document.getElementById(t).classList.remove("product-info__link--active")};start();
//# sourceMappingURL=build.min.js.map
