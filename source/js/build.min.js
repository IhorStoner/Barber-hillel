const getResource=async e=>{const t=await fetch("http://localhost:3000/"+e);if(!t.ok)throw new Error(`Could not fetch http://localhost:3000/presents/${e}, status ${t.status}`);return await t.json()},createElement=function({attrs:e={},styles:t={},handlers:n={},data:a=[],type:r="div",forAttr:c,text:s,html:o,className:i,id:l,parent:d}){const u=document.createElement(r);for(const t in e)u[t]=e[t];for(const e in t)u.style[e]=t[e];for(const e in n)u.addEventListener(e,n[e].bind(u));return a.forEach(e=>{u.setAttribute(e.key,e.value)}),c&&u.setAttribute("for",c),l&&(u.id=l),i&&(u.className=i),s&&(u.innerText=s),o&&(u.innerHTML=o),d&&d.appendChild(u),u};function showSearch(){const e=document.querySelector(".shop-search-container");e.innerHTML=" ";const t=createElement({type:"div",className:"shop__search-container",id:"search-container",parent:e}),n={text:"search",type:"button",className:"btn btn--orange shop__search-btn",id:"btn-search",parent:t};createElement({attrs:{placeholder:"Search something you need..."},type:"input",className:"shop__search-item",id:"input-search",parent:t}),createElement(n)}const filtersRadioData=[{value:"От дорогих к дешевым"},{value:"От дешевых к дорогим"}];function getBrandName(e){const t=new Map;return e.forEach(e=>t.set(e.brand,e.brand)),t}function showFilter(){const e=document.querySelector(".shop__flex-container");document.querySelectorAll(".header .nav__link").forEach(t=>t.addEventListener("click",()=>{const t=event.target.getAttribute("data-category");getResource(t).then(t=>createFilter(t,e))}))}function createFilter(e,t){const n=document.querySelector(".filters");n&&n.remove();const a=createElement({type:"aside",className:"filters",id:"filters",parent:t}),r=createElement({type:"div",className:"filters__header",parent:a});createElement({type:"h2",className:"shop__title",text:"Фильтр по брендам",parent:r});const c=createElement({type:"div",className:"filters__content",parent:a}),s=createElement({type:"div",className:"filters__block",parent:c}),o={type:"h2",text:"Choose something",className:"filters__title",parent:s};createElement(o);getBrandName(e).forEach((function(e){const t=createElement({type:"div",className:"choose-service__item filters__item",parent:s});createElement({type:"input",attrs:{name:e,type:"checkbox"},id:e,className:"choose-service__input",parent:t});createElement({type:"label",forAttr:e,className:"choose-service__checkbox",parent:t});createElement({type:"label",forAttr:e,className:"choose-master__text",text:e,parent:t})})),createElement(o),filtersRadioData.forEach((function(e){const t=createElement({type:"div",className:"choose-service__item filters__item",parent:s}),n={type:"input",attrs:{name:"choose-master__item",type:"radio"},id:"filter-"+filtersRadioData.indexOf(e),className:"choose-master__radio",parent:t};createElement(n);const a={type:"label",forAttr:"filter-"+filtersRadioData.indexOf(e),className:"choose-master__label",parent:t};createElement(a);const r={type:"label",forAttr:"filter-"+filtersRadioData.indexOf(e),className:"choose-master__text",text:e.value,parent:t};createElement(r)}));const i=createElement({type:"div",className:"filters__btn-submit",parent:a});createElement({type:"button",className:"btn btn--black",id:"btnShowFilter",text:"Фильтр",parent:i}).addEventListener("click",handleCheckFilter)}function handleCheckFilter(){const e=document.querySelectorAll(".choose-service__input"),t=document.querySelector(".shop__flex-container"),n=document.querySelector(".shop__cards").getAttribute("id"),a=[];e.forEach(e=>{e.checked&&a.push(e.name)}),getResource(n).then(e=>{const r=[];e.forEach(e=>{a.forEach(t=>{e.brand===t&&r.push(e)})});document.querySelectorAll(".choose-master__radio").forEach(a=>{a.checked&&"filter-0"===a.id?0===r.length?(e.sort((e,t)=>Number(e.price)>Number(t.price)?1:-1),e.reverse(),console.log(e),createCards(e,t,n)):(r.sort((e,t)=>Number(e.price)>Number(t.price)?1:-1),r.reverse(),createCards(r,t,n)):a.checked&&"filter-1"===a.id?0===r.length?(e.sort((e,t)=>Number(e.price)>Number(t.price)?1:-1),createCards(e,t,n)):(r.sort((e,t)=>Number(e.price)>Number(t.price)?1:-1),createCards(r,t,n)):0!==r.length?createCards(r,t,n):createCards(e,t,n)})})}const showBasket=()=>{const e=document.getElementById("basketBtn"),t=document.getElementById("basketCounter"),n=JSON.parse(localStorage.getItem("basket"));t.innerText=n.length,n.length>0?e.addEventListener("click",handleShowBasket):e.addEventListener("click",handleShowBasketNull)},handleShowBasketNull=()=>{const e=document.querySelector(".shop__flex-container");e.innerHTML=" ";const t=document.createElement("div");t.classList.add("productBasket"),e.appendChild(t),t.innerHTML='<h2 class="productBasket__basket-null">Ваша корзина пуста,начните покупки!</h2>'},handleShowBasket=()=>{const e=document.querySelector(".shop__flex-container");e.innerHTML=" ";const t=document.createElement("div");t.classList.add("productBasket"),e.appendChild(t);const n=JSON.parse(localStorage.getItem("basket"));document.getElementById("basketCounter").innerHTML=n.length,n.forEach(e=>{createBasketCard(e,t)});document.querySelectorAll("#basketDeleteItemBtn").forEach(e=>{e.addEventListener("click",handleDeleteProduct)});const a=createElement({type:"div",className:"checkout",parent:e}),r={type:"div",className:"checkout__price",parent:a,text:`Цена: ${getCountPrice()} грн`};createElement(r),createElement({type:"button",className:"btn btn--orange",parent:a,text:"Оформить заказ"})},handleDeleteProduct=()=>{const e=event.target.getAttribute("data-id");let t=JSON.parse(localStorage.getItem("basket"));const n=t.find(t=>t.id===Number(e)),a=t.indexOf(n);t.splice(a,1),localStorage.setItem("basket",JSON.stringify(t)),handleShowBasket()},createBasketCard=(e,t)=>{const n=document.createElement("div");n.classList.add("productBasket__item"),n.innerHTML=`\n        <div class="productBasket__img-container" data-id=${e.id}>\n                <img src="${e.img}" alt="" class="productBasket__img">\n        </div>\n        <div class="productBasket__content" data-id=${e.id}>\n        <h3 class="productBasket__title">\n            ${e.name}\n        </h3>\n        <p class="productBasket__price">\n            ${e.price} грн\n        </p>\n        <div class="productBasket__buttons">\n            <button class="productBasket__btnDelete btn btn--black" id="basketDeleteItemBtn" data-id="${e.id}">Убрать из корзины</button>\n        </div>\n    `,t.appendChild(n)},getCountPrice=()=>{const e=JSON.parse(localStorage.getItem("basket"));let t=0;return e.forEach(e=>{t+=Number(e.price)}),t},start=()=>{localStorage.getItem("basket")||localStorage.setItem("basket","[]");const e=document.querySelector(".shop__flex-container"),t=document.querySelector(".header .nav__link").getAttribute("data-category");handlerNavLink(),showSearch(),showBasket(),window.addEventListener("DOMContentLoaded",()=>{getResource(t).then(t=>createFilter(t,e)),getResource(t).then(n=>createCards(n,e,t))})},handlerNavLink=()=>{document.querySelectorAll(".header .nav .nav__link").forEach(e=>e.addEventListener("click",showProducts))},showProducts=e=>{const t=document.querySelector(".shop__flex-container");t.innerHTML=" ";const n=e.target.getAttribute("data-category");getResource(n).then(e=>{createFilter(e,t),createCards(e,t,n)})},createCards=(e,t,n)=>{const a=document.querySelector(".shop__cards");a&&a.remove();const r=document.createElement("div");r.classList.add("shop__cards"),r.id=n,t.appendChild(r),e.forEach(t=>{createCard(t,r,e)});document.querySelectorAll("#addInBasket").forEach(t=>{t.addEventListener("click",handleAddInBasket.bind(this,e))})},createCard=(e,t,n)=>{const a=document.createElement("div");a.classList.add("product"),a.innerHTML=`\n\n        <div class="product__img-container" data-id=${e.id}>\n                <img src="${e.img}" alt="" class="product__img">\n        </div>\n        <div class="product__content" data-id=${e.id}>\n                <h3 class="product__title">\n                    ${e.name}\n                </h3>\n                <p class="product__price">\n                    ${e.price} грн\n                </p>\n                <div class="product__buttons">\n                    <button class="btn btn--black">Посмотреть</button>\n                    <button class="btn btn--plus" id="addInBasket" data-id=${e.id}></button>\n                </div>\n`,t.appendChild(a),document.querySelectorAll(".product__img").forEach(e=>{e.style.width="100%"}),a.addEventListener("click",handlerProductItem.bind(null,n))},handleAddInBasket=e=>{const t=event.target.getAttribute("data-id"),n=e.find(e=>e.id===Number(t));let a=JSON.parse(localStorage.getItem("basket"));a.push(n),localStorage.setItem("basket",JSON.stringify(a));document.getElementById("basketCounter").innerHTML=a.length},handlerProductItem=(e,t)=>{const n=t.target;if("BUTTON"===n.tagName||"product"===n.className||"product__img-container"===n.className||"product__content"===n.className)return;const a=n.parentNode.getAttribute("data-id"),r=e.find(e=>e.id===Number(a));showDetailInfo(r)},showDetailInfo=e=>{document.querySelector(".shop .wrapper .shop-content .shop__flex-container").innerHTML="";const t=document.querySelector(".shop__flex-container"),n=document.createElement("div");n.classList.add("product-info"),n.innerHTML=`\n    <div class="product-info__img">\n        <img src=${e.img} alt="product img"/>\n    </div>\n    <div class="product-info__info">\n        <div class="product-info__link-container">\n            <a class="product-info__link product-info__link--active">Описание</a>\n            <a class="product-info__link">Отзывы</a>\n        </div>\n        <div class="product-info__title-container">\n            <h2 class="product-info__title">${e.name}</h2>\n            <p class="product-info__description">${e.descriptions}</p>\n        </div>\n        <div class="product-info__price-container">\n            <p class="product-info__price">${e.price} грн</p>\n            <button class="btn btn--plus"></button>\n        </div>\n    </div>\n    `,t.appendChild(n)};start();
//# sourceMappingURL=build.min.js.map
