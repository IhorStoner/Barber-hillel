const getResource=async e=>{const t=await fetch("http://localhost:3000/"+e);if(!t.ok)throw new Error(`Could not fetch http://localhost:3000/presents/${e}, status ${t.status}`);return await t.json()},createElement=function({attrs:e={},styles:t={},handlers:n={},data:r=[],type:a="div",forAttr:c,text:o,html:s,className:i,id:l,parent:d}){const p=document.createElement(a);for(const t in e)p[t]=e[t];for(const e in t)p.style[e]=t[e];for(const e in n)p.addEventListener(e,n[e].bind(p));return r.forEach(e=>{p.setAttribute(e.key,e.value)}),c&&p.setAttribute("for",c),l&&(p.id=l),i&&(p.className=i),o&&(p.innerText=o),s&&(p.innerHTML=s),d&&d.appendChild(p),p};function showSearch(){const e=document.querySelector(".shop-search-container");e.innerHTML=" ";const t=createElement({type:"div",className:"shop__search-container",id:"search-container",parent:e}),n={text:"search",type:"button",className:"btn btn--orange shop__search-btn",id:"btn-search",parent:t};createElement({attrs:{placeholder:"Search something you need..."},type:"input",className:"shop__search-item",id:"input-search",parent:t}),createElement(n)}const filtersRadioData=[{value:"from expensive to cheap"},{value:"from cheap to expensive"}];function getBrandName(e){const t=new Map;return e.forEach(e=>t.set(e.brand,e.brand)),t}function showFilter(){const e=document.querySelector(".shop__flex-container");document.querySelectorAll(".header .nav__link").forEach(t=>t.addEventListener("click",()=>{const t=event.target.getAttribute("data-category");getResource(t).then(t=>createFilter(t,e))}))}function createFilter(e,t){const n=document.querySelector(".filters");n&&n.remove();const r=createElement({type:"aside",className:"filters",id:"filters",parent:t}),a=createElement({type:"div",className:"filters__header",parent:r});createElement({type:"h2",className:"shop__title",text:"Filters",parent:a});const c=createElement({type:"div",className:"filters__content",parent:r}),o=createElement({type:"div",className:"filters__block",parent:c}),s={type:"h2",text:"Choose something",className:"filters__title",parent:o};createElement(s);getBrandName(e).forEach((function(e){const t=createElement({type:"div",className:"choose-service__item filters__item",parent:o});createElement({type:"input",attrs:{name:e,type:"checkbox"},id:e,className:"choose-service__input",parent:t});createElement({type:"label",forAttr:e,className:"choose-service__checkbox",parent:t});createElement({type:"label",forAttr:e,className:"choose-master__text",text:e,parent:t})})),createElement(s),filtersRadioData.forEach((function(e){const t=createElement({type:"div",className:"choose-service__item filters__item",parent:o}),n={type:"input",attrs:{name:"choose-master__item",type:"radio"},id:"filter-"+filtersRadioData.indexOf(e),className:"choose-master__radio",parent:t};createElement(n);const r={type:"label",forAttr:"filter-"+filtersRadioData.indexOf(e),className:"choose-master__label",parent:t};createElement(r);const a={type:"label",forAttr:"filter-"+filtersRadioData.indexOf(e),className:"choose-master__text",text:e.value,parent:t};createElement(a)}));const i=createElement({type:"div",className:"filters__btn-submit",parent:r});createElement({type:"button",className:"btn btn--black",id:"btnShowFilter",text:"SHOW",parent:i}).addEventListener("click",handleCheckFilter)}function handleCheckFilter(){const e=document.querySelectorAll(".choose-service__input"),t=document.querySelector(".shop__flex-container"),n=document.querySelector(".shop__cards").getAttribute("id"),r=[];e.forEach(e=>{e.checked&&r.push(e.name)}),getResource(n).then(e=>{const a=[];e.forEach(e=>{r.forEach(t=>{e.brand===t&&a.push(e)})});document.querySelectorAll(".choose-master__radio").forEach(r=>{r.checked&&"filter-0"===r.id?0===a.length?(e.sort((e,t)=>Number(e.price)>Number(t.price)?1:-1),e.reverse(),createCards(e,t,n)):(a.sort((e,t)=>Number(e.price)>Number(t.price)?1:-1),a.reverse(),createCards(a,t,n)):r.checked&&"filter-1"===r.id&&(0===a.length?(e.sort((e,t)=>Number(e.price)>Number(t.price)?1:-1),createCards(e,t,n)):(a.sort((e,t)=>Number(e.price)>Number(t.price)?1:-1),createCards(a,t,n)))})})}const basketArr=[];function showBasket(){const e=document.getElementById("basketBtn");document.getElementById("basketCounter").innerText=basketArr.length,e.addEventListener("click",handleShowBasket)}function handleShowBasket(){document.querySelector(".shop-content").innerHTML=""}const start=()=>{const e=document.querySelector(".shop__flex-container"),t=document.querySelector(".header .nav__link").getAttribute("data-category");handlerNavLink(),showSearch(),window.addEventListener("DOMContentLoaded",()=>{getResource(t).then(t=>createFilter(t,e)),getResource(t).then(n=>createCards(n,e,t))})},handlerNavLink=()=>{document.querySelectorAll(".header .nav .nav__link").forEach(e=>e.addEventListener("click",showProducts))},showProducts=e=>{const t=document.querySelector(".shop__flex-container");t.innerHTML=" ";const n=e.target.getAttribute("data-category");getResource(n).then(e=>{createFilter(e,t),createCards(e,t,n)})},createCards=(e,t,n)=>{const r=document.querySelector(".shop__cards");r&&r.remove();const a=document.createElement("div");a.classList.add("shop__cards"),a.id=n,t.appendChild(a),e.forEach(t=>{createCard(t,a,e)})},createCard=(e,t,n)=>{const r=document.createElement("div");r.classList.add("product"),r.innerHTML=`\n\n        <div class="product__img-container" data-id=${e.id}>\n                <img src="${e.img}" alt="" class="product__img">\n        </div>\n        <div class="product__content" data-id=${e.id}>\n                <h3 class="product__title">\n                    ${e.name}\n                </h3>\n                <p class="product__price">\n                    ${e.price}$\n                </p>\n                <div class="product__buttons">\n                    <button class="btn btn--black">Shop now</button>\n                    <button class="btn btn--plus"></button>\n                </div>\n`,t.appendChild(r),document.querySelectorAll(".product__img").forEach(e=>{e.style.width="100%"}),r.addEventListener("click",handlerProductItem.bind(null,n))},handlerProductItem=(e,t)=>{const n=t.target;if("BUTTON"===n.tagName||"product"===n.className||"product__img-container"===n.className||"product__content"===n.className)return;const r=n.parentNode.getAttribute("data-id"),a=e.find(e=>e.id===Number(r));showDetailInfo(a)},showDetailInfo=e=>{document.querySelector(".shop .wrapper .shop-content .shop__flex-container").innerHTML="";const t=document.querySelector(".shop__flex-container"),n=document.createElement("div");n.classList.add("product-info"),n.innerHTML=`\n    <div class="product-info__img">\n        <img src=${e.img} alt="product img"/>\n    </div>\n    <div class="product-info__info">\n        <div class="product-info__link-container">\n            <a class="product-info__link product-info__link--active">Описание</a>\n            <a class="product-info__link">Отзывы</a>\n        </div>\n        <div class="product-info__title-container">\n            <h2 class="product-info__title">${e.name}</h2>\n            <p class="product-info__description">${e.descriptions}</p>\n        </div>\n        <div class="product-info__price-container">\n            <p class="product-info__price">${e.price}$</p>\n            <button class="btn btn--plus"></button>\n        </div>\n    </div>\n    `,t.appendChild(n)};start();
//# sourceMappingURL=build.min.js.map
