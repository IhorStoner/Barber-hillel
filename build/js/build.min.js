const getResource=async e=>{const t=await fetch("http://localhost:3000/"+e);if(!t.ok)throw new Error(`Could not fetch http://localhost:3000/presents/${e}, status ${t.status}`);return await t.json()},createElement=function({attrs:e={},styles:t={},handlers:a={},data:r=[],type:n="div",forAttr:c,text:s,html:o,className:i,id:l,parent:d}){const p=document.createElement(n);for(const t in e)p[t]=e[t];for(const e in t)p.style[e]=t[e];for(const e in a)p.addEventListener(e,a[e].bind(p));return r.forEach(e=>{p.setAttribute(e.key,e.value)}),c&&p.setAttribute("for",c),l&&(p.id=l),i&&(p.className=i),s&&(p.innerText=s),o&&(p.innerHTML=o),d&&d.appendChild(p),p};function showSearch(){const e=document.querySelector(".shop-search-container");e.innerHTML=" ";const t=createElement({type:"div",className:"shop__search-container",id:"search-container",parent:e}),a={text:"search",type:"button",className:"btn btn--orange shop__search-btn",id:"btn-search",parent:t};createElement({attrs:{placeholder:"Search something you need..."},type:"input",className:"shop__search-item",id:"input-search",parent:t}),createElement(a)}const filtersRadioData=[{value:"От дорогих к дешевым"},{value:"От дешевых к дорогим"}];function getBrandName(e){const t=new Map;return e.forEach(e=>t.set(e.brand,e.brand)),t}function showFilter(){const e=document.querySelector(".shop__flex-container");document.querySelectorAll(".header .nav__link").forEach(t=>t.addEventListener("click",()=>{const t=event.target.getAttribute("data-category");getResource(t).then(t=>createFilter(t,e))}))}function createFilter(e,t){const a=document.querySelector(".filters");a&&a.remove();const r=createElement({type:"aside",className:"filters",id:"filters",parent:t}),n=createElement({type:"div",className:"filters__header",parent:r});createElement({type:"h2",className:"shop__title",text:"Фильтр по брендам",parent:n});const c=createElement({type:"div",className:"filters__content",parent:r}),s=createElement({type:"div",className:"filters__block",parent:c}),o={type:"h2",text:"Choose something",className:"filters__title",parent:s};createElement(o);getBrandName(e).forEach((function(e){const t=createElement({type:"div",className:"choose-service__item filters__item",parent:s});createElement({type:"input",attrs:{name:e,type:"checkbox"},id:e,className:"choose-service__input",parent:t});createElement({type:"label",forAttr:e,className:"choose-service__checkbox",parent:t});createElement({type:"label",forAttr:e,className:"choose-master__text",text:e,parent:t})})),createElement(o),filtersRadioData.forEach((function(e){const t=createElement({type:"div",className:"choose-service__item filters__item",parent:s}),a={type:"input",attrs:{name:"choose-master__item",type:"radio"},id:"filter-"+filtersRadioData.indexOf(e),className:"choose-master__radio",parent:t};createElement(a);const r={type:"label",forAttr:"filter-"+filtersRadioData.indexOf(e),className:"choose-master__label",parent:t};createElement(r);const n={type:"label",forAttr:"filter-"+filtersRadioData.indexOf(e),className:"choose-master__text",text:e.value,parent:t};createElement(n)}));const i=createElement({type:"div",className:"filters__btn-submit",parent:r});createElement({type:"button",className:"btn btn--black",id:"btnShowFilter",text:"Фильтр",parent:i}).addEventListener("click",handleCheckFilter)}function handleCheckFilter(){const e=document.querySelectorAll(".choose-service__input"),t=document.querySelector(".shop__flex-container"),a=document.querySelector(".shop__cards").getAttribute("id"),r=[];e.forEach(e=>{e.checked&&r.push(e.name)}),getResource(a).then(e=>{const n=[];e.forEach(e=>{r.forEach(t=>{e.brand===t&&n.push(e)})});document.querySelectorAll(".choose-master__radio").forEach(r=>{r.checked&&"filter-0"===r.id?0===n.length?(e.sort((e,t)=>Number(e.price)>Number(t.price)?1:-1),e.reverse(),console.log(e),createCards(e,t,a)):(n.sort((e,t)=>Number(e.price)>Number(t.price)?1:-1),n.reverse(),createCards(n,t,a)):r.checked&&"filter-1"===r.id?0===n.length?(e.sort((e,t)=>Number(e.price)>Number(t.price)?1:-1),createCards(e,t,a)):(n.sort((e,t)=>Number(e.price)>Number(t.price)?1:-1),createCards(n,t,a)):0!==n.length?createCards(n,t,a):createCards(e,t,a)})})}const basketArr=[{id:11,name:"Опасная Бритва The Bluebeards Revenge «Claymore» Straight Razor 5/8",price:"5778",descriptions:"Классическая бритва со сверх-острым лезвием из высококачественной стали и ручкой из африканского черного дерева. Обеспечивает безупречно гладкое и профессиональное бритье.Качественная классическая бритва The Bluebeards Revenge «CLAYMORE» Straight Razor 5/8 African Blackwood из углеродистой стали — это прекрасный инструмент для бритья. Идеально подходит для мужчин, которые любят классический стиль бритья.Изготовлена ​​вручную с нанесением на лезвие аутентичной надписи, которая добавляет бритве стильный вид и уникальность. Современный дизайн бритвы не просто радует глаз, но и продуман до мельчайших деталей. Вес отлично сбалансирован, и таким образом бритва не производит излишнего давления на кожу, которое может спровоцировать раздражение и воспаление. Кожа владельца больше защищена от раздражения и мелких порезов. Подходит как для новичков, так и для опытных пользователей опасных бритв. Идеальный выбор настоящих мужчин.",brand:"Claymore",img:"https://barbercompany.com/image/cache/webp/catalog/product/2016-06-the-bluedeards-revange-claymore-straight-razor-543x543.webp"},{id:11,name:"Опасная Бритва The Bluebeards Revenge «Claymore» Straight Razor 5/8",price:"5778",descriptions:"Классическая бритва со сверх-острым лезвием из высококачественной стали и ручкой из африканского черного дерева. Обеспечивает безупречно гладкое и профессиональное бритье.Качественная классическая бритва The Bluebeards Revenge «CLAYMORE» Straight Razor 5/8 African Blackwood из углеродистой стали — это прекрасный инструмент для бритья. Идеально подходит для мужчин, которые любят классический стиль бритья.Изготовлена ​​вручную с нанесением на лезвие аутентичной надписи, которая добавляет бритве стильный вид и уникальность. Современный дизайн бритвы не просто радует глаз, но и продуман до мельчайших деталей. Вес отлично сбалансирован, и таким образом бритва не производит излишнего давления на кожу, которое может спровоцировать раздражение и воспаление. Кожа владельца больше защищена от раздражения и мелких порезов. Подходит как для новичков, так и для опытных пользователей опасных бритв. Идеальный выбор настоящих мужчин.",brand:"Claymore",img:"https://barbercompany.com/image/cache/webp/catalog/product/2016-06-the-bluedeards-revange-claymore-straight-razor-543x543.webp"}],showBasket=()=>{const e=document.getElementById("basketBtn"),t=document.getElementById("basketCounter"),a=JSON.parse(localStorage.getItem("basket"));t.innerText=a.length,e.addEventListener("click",handleShowBasket)},handleShowBasket=()=>{const e=document.querySelector(".shop__flex-container");e.innerHTML=" ";const t=document.createElement("div");t.classList.add("productBasket"),e.appendChild(t);JSON.parse(localStorage.getItem("basket")).forEach(e=>{createBasketCard(e,t)});const a=createElement({type:"div",className:"checkout",parent:e}),r={type:"div",className:"checkout__price",parent:a,text:`Цена: ${getCountPrice()} грн`};createElement(r),createElement({type:"button",className:"btn btn--orange",parent:a,text:"Оформить заказ"})},createBasketCard=(e,t)=>{const a=document.createElement("div");a.classList.add("productBasket__item"),a.innerHTML=`\n        <div class="productBasket__img-container" data-id=${e.id}>\n                <img src="${e.img}" alt="" class="productBasket__img">\n        </div>\n        <div class="productBasket__content" data-id=${e.id}>\n        <h3 class="productBasket__title">\n            ${e.name}\n        </h3>\n        <p class="productBasket__price">\n            ${e.price} грн\n        </p>\n        <div class="productBasket__buttons">\n            <button class="productBasket__btnDelete btn btn--black" id="basketDeleteItemBtn">Убрать из корзины</button>\n        </div>\n    `,t.appendChild(a)},getCountPrice=()=>{const e=JSON.parse(localStorage.getItem("basket"));let t=0;return e.forEach(e=>{t+=Number(e.price)}),t},start=()=>{localStorage.getItem("basket")||localStorage.setItem("basket",JSON.stringify(basketArr));const e=document.querySelector(".shop__flex-container"),t=document.querySelector(".header .nav__link").getAttribute("data-category");handlerNavLink(),showSearch(),showBasket(),window.addEventListener("DOMContentLoaded",()=>{getResource(t).then(t=>createFilter(t,e)),getResource(t).then(a=>createCards(a,e,t))})},handlerNavLink=()=>{document.querySelectorAll(".header .nav .nav__link").forEach(e=>e.addEventListener("click",showProducts))},showProducts=e=>{const t=document.querySelector(".shop__flex-container");t.innerHTML=" ";const a=e.target.getAttribute("data-category");getResource(a).then(e=>{createFilter(e,t),createCards(e,t,a)})},createCards=(e,t,a)=>{const r=document.querySelector(".shop__cards");r&&r.remove();const n=document.createElement("div");n.classList.add("shop__cards"),n.id=a,t.appendChild(n),e.forEach(t=>{createCard(t,n,e)})},createCard=(e,t,a)=>{const r=document.createElement("div");r.classList.add("product"),r.innerHTML=`\n\n        <div class="product__img-container" data-id=${e.id}>\n                <img src="${e.img}" alt="" class="product__img">\n        </div>\n        <div class="product__content" data-id=${e.id}>\n                <h3 class="product__title">\n                    ${e.name}\n                </h3>\n                <p class="product__price">\n                    ${e.price} грн\n                </p>\n                <div class="product__buttons">\n                    <button class="btn btn--black">Посмотреть</button>\n                    <button class="btn btn--plus"></button>\n                </div>\n`,t.appendChild(r),document.querySelectorAll(".product__img").forEach(e=>{e.style.width="100%"}),r.addEventListener("click",handlerProductItem.bind(null,a))},handlerProductItem=(e,t)=>{const a=t.target;if("BUTTON"===a.tagName||"product"===a.className||"product__img-container"===a.className||"product__content"===a.className)return;const r=a.parentNode.getAttribute("data-id"),n=e.find(e=>e.id===Number(r));showDetailInfo(n)},showDetailInfo=e=>{document.querySelector(".shop .wrapper .shop-content .shop__flex-container").innerHTML="";const t=document.querySelector(".shop__flex-container"),a=document.createElement("div");a.classList.add("product-info"),a.innerHTML=`\n    <div class="product-info__img">\n        <img src=${e.img} alt="product img"/>\n    </div>\n    <div class="product-info__info">\n        <div class="product-info__link-container">\n            <a class="product-info__link product-info__link--active">Описание</a>\n            <a class="product-info__link">Отзывы</a>\n        </div>\n        <div class="product-info__title-container">\n            <h2 class="product-info__title">${e.name}</h2>\n            <p class="product-info__description">${e.descriptions}</p>\n        </div>\n        <div class="product-info__price-container">\n            <p class="product-info__price">${e.price} грн</p>\n            <button class="btn btn--plus"></button>\n        </div>\n    </div>\n    `,t.appendChild(a)};start();
